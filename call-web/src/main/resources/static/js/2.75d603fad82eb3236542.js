webpackJsonp([2],{"3ojF":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=t("lC5x"),o=t.n(l),a=t("J0Oq"),n=t.n(a),i=t("c+XW"),u=t("gyMJ"),s={data:function(){return{dialogVisible:!1,runningStatusTimer:"",running:!0,failName:[],uploadName:[],ruleForm:{type:1,filePath:"",property:"属性图",attachProperty:"主图",productNameFile:"下图记录",cookie:""},rules:{filePath:[{required:!0,message:"请输入文件根路径",trigger:"blur"}],property:[{required:!0,message:"请输入",trigger:"blur"}],attachProperty:[{required:!0,message:"请输入",trigger:"blur"}],cookie:[{required:!0,message:"请输入cookie",trigger:"blur"}]}}},beforeDestroy:function(){this.runningStatusTimer&&clearInterval(this.runningStatusTimer)},methods:{submitForm:function(e){var r,t=this;1!==this.ruleForm.type||this.ruleForm.productNameFile?this.$refs[e].validate((r=n()(o.a.mark(function e(r){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return e.next=3,Object(u.c)(t.ruleForm);case 3:e.sent.status&&(t.dialogVisible=!0,t.running=!0,t.failName=[],t.uploadName=[],t.runningStatusTimer=setInterval(function(){t.getProcessRunningStatus()},5e3)),e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,t)})),function(e){return r.apply(this,arguments)})):Object(i.Message)({message:"请输入产品&价格文件名",type:"error",duration:3e3,showClose:!0})},getProcessRunningStatus:function(){var e=this;return n()(o.a.mark(function r(){var t;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(u.b)(e.ruleForm);case 2:(t=r.sent).result&&(e.running=t.result.running,e.failName=t.result.failName,e.uploadName=t.result.uploadName,t.result.running||clearInterval(e.runningStatusTimer));case 4:case"end":return r.stop()}},r,e)}))()},resetForm:function(e){this.$refs[e].resetFields()}}},c={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-form",{ref:"ruleForm",staticClass:"product-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px",size:"small"}},[t("el-form-item",{attrs:{label:"产品名称",prop:"type"}},[t("el-radio-group",{model:{value:e.ruleForm.type,callback:function(r){e.$set(e.ruleForm,"type",r)},expression:"ruleForm.type"}},[t("el-radio",{attrs:{label:0}},[e._v("使用图片名称")]),e._v(" "),t("el-radio",{attrs:{label:1}},[e._v("读取txt文件")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"文件根路径",prop:"filePath"}},[t("el-input",{model:{value:e.ruleForm.filePath,callback:function(r){e.$set(e.ruleForm,"filePath",r)},expression:"ruleForm.filePath"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"属性图名称",prop:"property"}},[t("el-input",{model:{value:e.ruleForm.property,callback:function(r){e.$set(e.ruleForm,"property",r)},expression:"ruleForm.property"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"主图名称",prop:"attachProperty"}},[t("el-input",{model:{value:e.ruleForm.attachProperty,callback:function(r){e.$set(e.ruleForm,"attachProperty",r)},expression:"ruleForm.attachProperty"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"产品&价格文件名",prop:"productNameFile"}},[t("el-input",{model:{value:e.ruleForm.productNameFile,callback:function(r){e.$set(e.ruleForm,"productNameFile",r)},expression:"ruleForm.productNameFile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Authorization",prop:"cookie"}},[t("el-input",{attrs:{type:"textarea",rows:"12"},model:{value:e.ruleForm.cookie,callback:function(r){e.$set(e.ruleForm,"cookie",r)},expression:"ruleForm.cookie"}})],1),e._v(" "),t("el-form-item",{staticClass:"content_button"},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("创建产品")]),e._v(" "),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1),e._v(" "),t("el-dialog",{attrs:{title:"正在刷新创建的产品",visible:e.dialogVisible,width:"40%",center:""},on:{"update:visible":function(r){e.dialogVisible=r}}},[e.running?t("p",{staticStyle:{color:"#409EFF","text-align":"center"}},[e._v("正在创建")]):e._e(),e._v(" "),e.running?e._e():t("p",{staticStyle:{color:"#67C23A","text-align":"center"}},[e._v("创建完成")]),e._v(" "),t("p",{staticStyle:{color:"#909399","text-align":"center"}},[e._v("创建成功产品")]),e._v(" "),e._l(e.uploadName,function(r,l){return t("div",{key:1e3+l},[t("span",[e._v(e._s(r))])])}),e._v(" "),t("p",{staticStyle:{color:"#F56C6C","text-align":"center"}},[e._v("创建失败产品")]),e._v(" "),e._l(e.failName,function(r,l){return t("div",{key:2e3+l},[t("span",[e._v(e._s(r))])])}),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){e.dialogVisible=!1}}},[e._v("关闭")])],1)],2)],1)},staticRenderFns:[]};var m=t("C7Lr")(s,c,!1,function(e){t("mglI")},null,null);r.default=m.exports},mglI:function(e,r){}});
//# sourceMappingURL=2.75d603fad82eb3236542.js.map
webpackJsonp([2],{D39z:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("lC5x"),l=r.n(o),a=r("J0Oq"),s=r.n(a),i=r("c+XW"),n=r("gyMJ"),u={data:function(){return{dialogVisible:!1,runningStatusTimer:"",running:!0,failName:[],uploadName:[],ruleForm:{type:1,priceType:2,attachType:"",filePath:"",property:"属性图",attachProperty:"主图",productNameFile:"下图记录",cookie:"",customDefCheck:!1,customDefs:{code:"Size",name:"尺寸",valueOptions:"M,L"}},rules:{filePath:[{required:!0,message:"请输入文件根路径",trigger:"blur"}],property:[{required:!0,message:"请输入列表文件夹名称",trigger:"blur"}],attachProperty:[{required:!0,message:"请输入详情列表文件夹名称",trigger:"blur"}],attachType:[{required:!0,message:"请选择文件夹关系",trigger:"blur"}],cookie:[{required:!0,message:"请输入Authorization",trigger:"blur"}]}}},beforeDestroy:function(){this.runningStatusTimer&&clearInterval(this.runningStatusTimer)},methods:{submitForm:function(e){var t,r=this;1!==this.ruleForm.type||this.ruleForm.productNameFile?!0!==this.ruleForm.customDefCheck||this.ruleForm.customDefs.code&&this.ruleForm.customDefs.name&&this.ruleForm.customDefs.valueOptions?this.$refs[e].validate((t=s()(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}!0!==r.ruleForm.customDefCheck&&(r.ruleForm.customDefs.code||r.ruleForm.customDefs.name||r.ruleForm.customDefs.valueOptions)?r.$confirm("商品变体输入了内容，但未选择使用，确定后则不会创建商品变体","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.sendProduct()}).catch(function(){}):r.sendProduct(),e.next=5;break;case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}},e,r)})),function(e){return t.apply(this,arguments)})):Object(i.Message)({message:"商品变体需要全部输入",type:"error",duration:3e3,showClose:!0}):Object(i.Message)({message:"读取txt文件时需要输入txt文件名",type:"error",duration:3e3,showClose:!0})},sendProduct:function(){var e=this;return s()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.c)(e.ruleForm);case 2:t.sent.status&&(e.dialogVisible=!0,e.running=!0,e.failName=[],e.uploadName=[],e.runningStatusTimer=setInterval(function(){e.getProcessRunningStatus()},5e3));case 4:case"end":return t.stop()}},t,e)}))()},getProcessRunningStatus:function(){var e=this;return s()(l.a.mark(function t(){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.b)(e.ruleForm);case 2:(r=t.sent).result&&(e.running=r.result.running,e.failName=r.result.failName,e.uploadName=r.result.uploadName,r.result.running||clearInterval(e.runningStatusTimer));case 4:case"end":return t.stop()}},t,e)}))()},resetForm:function(e){this.$refs[e].resetFields()}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",{staticStyle:{"text-align":"center"}},[e._v("洛菲纳跨境电商智慧生态系统")]),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"lonfenner-product-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px",size:"small"}},[r("el-form-item",{attrs:{label:"文件根路径",prop:"filePath"}},[r("el-input",{model:{value:e.ruleForm.filePath,callback:function(t){e.$set(e.ruleForm,"filePath",t)},expression:"ruleForm.filePath"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"列表文件夹名称",prop:"property"}},[r("el-input",{model:{value:e.ruleForm.property,callback:function(t){e.$set(e.ruleForm,"property",t)},expression:"ruleForm.property"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"详情文件夹名称",prop:"attachProperty"}},[r("el-input",{model:{value:e.ruleForm.attachProperty,callback:function(t){e.$set(e.ruleForm,"attachProperty",t)},expression:"ruleForm.attachProperty"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"文件夹关系",prop:"attachType"}},[r("el-radio-group",{model:{value:e.ruleForm.attachType,callback:function(t){e.$set(e.ruleForm,"attachType",t)},expression:"ruleForm.attachType"}},[r("el-radio",{attrs:{label:0}},[e._v("列表文件夹和详情文件夹平级，即两个文件夹都作为主图")]),e._v(" "),r("br"),e._v(" "),r("el-radio",{staticStyle:{"margin-top":"8px"},attrs:{label:1}},[e._v("列表文件夹作为主图，详情文件夹作为附图")]),e._v(" "),r("br"),e._v(" "),r("el-radio",{staticStyle:{"margin-top":"8px"},attrs:{label:2}},[e._v("列表文件夹和详情文件夹第一张作为主图，详情文件夹剩下的图片作为附图")]),e._v(" "),r("br"),e._v(" "),r("el-radio",{staticStyle:{"margin-top":"8px"},attrs:{label:3}},[e._v("列表文件夹和详情文件夹第一张作为主图，详情文件夹剩下的图片丢弃")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"产品名称",prop:"type"}},[r("el-radio-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[r("el-radio",{attrs:{label:0}},[e._v("使用图片名称")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("读取txt文件")])],1)],1),e._v(" "),1==e.ruleForm.type?r("el-form-item",{attrs:{label:"txt文件名",prop:"productNameFile"}},[r("el-input",{model:{value:e.ruleForm.productNameFile,callback:function(t){e.$set(e.ruleForm,"productNameFile",t)},expression:"ruleForm.productNameFile"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"产品价格",prop:"priceType"}},[r("el-radio-group",{model:{value:e.ruleForm.priceType,callback:function(t){e.$set(e.ruleForm,"priceType",t)},expression:"ruleForm.priceType"}},[r("el-radio",{attrs:{label:0}},[e._v("使用图片名称,取(前数字")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("使用图片名称,放入品牌名")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("默认无价格")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"商品变体",prop:"customDefs"}},[r("div",[r("el-checkbox",{model:{value:e.ruleForm.customDefCheck,callback:function(t){e.$set(e.ruleForm,"customDefCheck",t)},expression:"ruleForm.customDefCheck"}},[e._v("使用")]),e._v(" "),r("el-input",{staticStyle:{width:"140px","margin-left":"20px"},model:{value:e.ruleForm.customDefs.code,callback:function(t){e.$set(e.ruleForm.customDefs,"code",t)},expression:"ruleForm.customDefs.code"}}),e._v(" "),r("el-input",{staticStyle:{width:"140px"},model:{value:e.ruleForm.customDefs.name,callback:function(t){e.$set(e.ruleForm.customDefs,"name",t)},expression:"ruleForm.customDefs.name"}}),e._v(" "),r("el-input",{staticStyle:{width:"286px"},model:{value:e.ruleForm.customDefs.valueOptions,callback:function(t){e.$set(e.ruleForm.customDefs,"valueOptions",t)},expression:"ruleForm.customDefs.valueOptions"}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"Authorization",prop:"cookie"}},[r("el-input",{attrs:{type:"textarea",rows:"12"},model:{value:e.ruleForm.cookie,callback:function(t){e.$set(e.ruleForm,"cookie",t)},expression:"ruleForm.cookie"}})],1),e._v(" "),r("el-form-item",{staticClass:"content_button"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("创建产品")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1),e._v(" "),r("el-dialog",{attrs:{title:"正在刷新创建的产品",visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"50%",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.running?r("p",{staticStyle:{color:"#409EFF","text-align":"center"}},[e._v("正在创建")]):e._e(),e._v(" "),e.running?e._e():r("p",{staticStyle:{color:"#67C23A","text-align":"center"}},[e._v("创建完成")]),e._v(" "),r("p",{staticStyle:{color:"#909399","text-align":"center"}},[e._v("创建成功产品")]),e._v(" "),e._l(e.uploadName,function(t,o){return r("div",{key:1e3+o},[r("span",[e._v(e._s(t))])])}),e._v(" "),r("p",{staticStyle:{color:"#F56C6C","text-align":"center"}},[e._v("创建失败产品")]),e._v(" "),e._l(e.failName,function(t,o){return r("div",{key:2e3+o},[r("span",[e._v(e._s(t))])])}),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关闭")])],1)],2)],1)],1)},staticRenderFns:[]};var m=r("C7Lr")(u,c,!1,function(e){r("RFBw")},null,null);t.default=m.exports},RFBw:function(e,t){}});
//# sourceMappingURL=2.5a667cd16dee3aa05d44.js.map